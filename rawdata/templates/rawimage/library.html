{% extends 'base.html' %}
{% load i18n %}

{% block title %}AstroBin - {% blocktrans %}Your raw data library{% endblocktrans %}{% endblock %}

{% block content %}
    {% comment %}
        The following template is assumed to exist in AstroBin.
    {% endcomment %}
    {% include 'user/profile-subnav.html' %}

    <div class="row section">
        <div class="span10">
            <div class="page-header">
                <h1>{% blocktrans %}Your raw data library{% endblocktrans %}
                    <small>
                        {% blocktrans with used_bytes|filesizeformat as used and byte_limit|filesizeformat as limit %}You have used {{used}} of your {{limit}}.{% endblocktrans %}
                        ({{used_percent}}%)
                    </small>
                </h1>
            </div>
            {% if used_percent > 0 %}
                <div class="progress {{progress_class}}">
                    <div class="bar" style="width:{{used_percent}}%"></div>
                </div>
            {% endif %}
        </div>

        <div class="span2">
            <a class="btn btn-large btn-primary btn-header" href="{% url subscription_list %}">
                <i class="icon-book"></i> {% trans "Manage plans" %}
            </a>
            <a class="btn btn-large btn-primary btn-header" href="{% url image_upload %}">
                <i class="icon-upload-alt"></i> {% trans "Upload" %}
            </a>
        </div>
    </div>

    {% if over_limit %}
        <div class="alert alert-error">
            <h4 class="alert-heading"><i class="icon-fire"></i> {% trans "Error!" %}</h3>
            {% trans "You have no more space left on your Raw Data account. Please delete some files to make room, or upgrade your account." %}
        </div>
    {% endif %} 

    {% if unindexed_count %}
        <div class="alert alert-warning">
            <h4 class="alert-heading"><i class="icon-warning-sign"></i> {% trans "Warning!" %}</h3>
            {% blocktrans with unindexed_count as number and total_files as total %}AstroBin is still working to index {{number}} of your {{total}} raw files.{% endblocktrans %}
        </div>
    {% endif %} 

    {% for type, data in folders.items %}
        <p>{{data.label}}: {{data.images|length}} images.</p>
    {% endfor %}

    {% include 'rawimage/_images.html' %}
{% endblock %}

{% block extra_js %}
    {% include 'rawimage/_images_js.html' %}
{% endblock %}
