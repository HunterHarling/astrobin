{% extends 'base.html' %}
{% load i18n %}
{% load tags %}

{% block title %}AstroBin - {% blocktrans with user=user %}{{user}}'s favorites{% endblocktrans %}{% endblock %}
{% block content %}
<a name="page_anchor"></a>
<div class="profile">
    {% include 'inclusion_tags/profile_tabs.html' with active_tab='gallery' %}
    <div class="tabbed-box clear">
        <div class="container">
            <h1 class="profile">
                {% ifequal user request.user %}
                    {% blocktrans %}View your favorites{% endblocktrans %}
                {% else %}
                    {% blocktrans with user.username as username %}View {{username}}'s favorites{% endblocktrans %}
                {% endifequal %}
            </h1>

            {% if user == request.user %}
            <p>
                {% blocktrans %}These are the images you marked as favorite.{% endblocktrans %}
            </p>
            {% endif %}

            {% image_list request image_list %}
        </div> <!-- container -->
    </div> <!-- tabbed-box -->

    {% if request.user == user %}
    <noscript>
        <div class="tools-box clear">
            <h2>{% trans "Tools" %}</h2>
            <ul>
                <li>
                    <a href="{% url profile_edit_basic %}">
                        <img src="/static/icons/iconic/orange/edit_profile.png" alt="{% trans "Edit profile" %}"/>
                    </a>
                    <a href="{% url profile_edit_basic %}">
                        {% trans "Edit profile" %}
                    </a>
                </li>
                <li>
                    <a href="{% url auth_logout %}">
                        <img src="/static/icons/iconic/orange/logout.png" alt="{% trans "Logout" %}"/>
                    </a>
                    <a href="{% url auth_logout %}">
                        {% trans "Logout" %}
                    </a>
                </li>
            </ul>
        </div>
    </noscript>
    {% endif %}
</div> <!-- profile -->
{% endblock %}

{% block extra_js %}
<script type="text/javascript">
$(document).ready(function() {
    common.init(
        '{{user.username}}',
        {
            follow_action: {
                dialog: {
                    title : "{% blocktrans with image.user.username as username %}Follow {{username}}?{% endblocktrans %}",
                    body  : "{% blocktrans with image.user.username as username %}You will receive a notification every time {{username}} posts a new image. Continue?{% endblocktrans %}",
                    button: "{% trans "Yes, follow!" %}"
                },
                stop_following: "{% trans "Stop following" %}"
            },
            unfollow_action: {
                dialog: {
                    title : "{% blocktrans with image.user.username as username %}Stop following {{username}}?{% endblocktrans %}",
                    body  : "{% blocktrans with image.user.username as username %}You will stop receiving notifications when {{username}} posts a new image. Continue?{% endblocktrans %}",
                    button: "{% trans "Yes, stop following!" %}"
                },
                follow: "{% trans "Follow" %}"
            },
            message_action: {
                dialog: {
                    title : "{% blocktrans with image.user.username as username %}Send {{username}} a message{% endblocktrans %}",
                    body  : "",
                    button: "{% trans "Send" %} &rarr;"
                },
                form_html: '{% autoescape off %}{{private_message_form.as_p|append_slash}}{% endautoescape %}',
                csrf_token: '{{csrf_token}}',
                url      : "{% url send_private_message %}"
            }
        });
});
</script>
{% endblock %}
