{% extends 'base.html' %}
{% load i18n %}

{% block content %}
    {% include 'profile-edit-menu.html' %}
    <div class="form-box">
        <form method="post" action="/profile/save/gear/">
            {{form.as_p}}
            <script language="javascript">
            $(document).ready(function() {
                var telescopesData =     {items:{% autoescape off %}{{telescopes_prefill}}{% endautoescape %}};
                var mountsData =         {items:{% autoescape off %}{{mounts_prefill}}{% endautoescape %}};
                var camerasData =        {items:{% autoescape off %}{{cameras_prefill}}{% endautoescape %}};
                var focal_reducersData = {items:{% autoescape off %}{{focal_reducers_prefill}}{% endautoescape %}};
                $("#id_telescopes").autoSuggest("/autocomplete/telescopes/",
                    {asHtmlID: 'telescopes',
                     selectedItemProp: 'name',
                     searchObjProps: 'name',
                     preFill: telescopesData.items,
                     selectedItemProp: 'name',
                     selectedValuesProp: 'name'});
                $("#id_mounts").autoSuggest("/autocomplete/mounts/",
                    {asHtmlID: 'mounts',
                     selectedItemProp: 'name',
                     searchObjProps: 'name',
                     preFill: mountsData.items,
                     selectedItemProp: 'name',
                     selectedValuesProp: 'name'});
                $("#id_cameras").autoSuggest("/autocomplete/cameras/",
                    {asHtmlID: 'cameras',
                     selectedItemProp: 'name',
                     searchObjProps: 'name',
                     preFill: camerasData.items,
                     selectedItemProp: 'name',
                     selectedValuesProp: 'name'});
                $("#id_focal_reducers").autoSuggest("/autocomplete/focal_reducers/",
                    {asHtmlID: 'focal_reducers',
                     selectedItemProp: 'name',
                     searchObjProps: 'name',
                     preFill: focal_reducersData.items,
                     selectedItemProp: 'name',
                     selectedValuesProp: 'name'});

            });
            </script>
            <p><input class="button" type="submit" value="{% trans "Save" %}" /></p>
        </form>
    </div>  
{% endblock %}

