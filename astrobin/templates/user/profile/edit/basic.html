{% extends 'base.html' %}
{% load i18n %}

{% block content %}
    {% include 'profile-edit-menu.html' %}
    <div class="sided-main-content">
        <h2>{% trans "Edit your basic information" %}</h2>
        <form method="post" action="{% url profile_save_basic %}">{% csrf_token %}
        {{form.as_p}}
        <noscript>
            <p class="hint">
            {% blocktrans %}* use a comma to separate the values.{% endblocktrans %}
            </p>
        </noscript>
        <ul>
            <li><input class="button submit-button" type="submit" value="{% trans "Save" %}" /></li>
            {% comment %}We should use {% url password_cchange %} or something.{% endcomment %}
            <li><a href="/accounts/password/change/">{% trans "or click here to change your password" %}</a>
        </ul>
        </form>
    </div>  
{% endblock %}

{% block extra_js %}
    <script language="javascript">
        $(document).ready(function() {
            var startText = '{% trans "Enter partial name and wait for the suggestions!" %}';
            var emptyText = '{% trans "No results. Press TAB to add it!" %}';
            {% autoescape off %}
            {% for key, value in prefill_dict.items %}
            $('#id_{{key}}').autoSuggest('/autocomplete/{{key}}/',
                {asHtmlID: '{{key}}',
                selectedItemProp: 'name',
                searchObjProps: 'name',
                preFill: {{value}},
                selectedItemProp: 'name',
                selectedValuesProp: 'name',
                startText: startText,
                emptyText: emptyText});
            {% endfor %}
            {% endautoescape %}
        });
    </script>
{% endblock %}

