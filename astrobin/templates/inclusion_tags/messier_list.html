{% load i18n %}
{% load tags %}

<div class="thumbnail-list messier clear">
{% for object in object_list %}
    {% random_id %}
    {% if object.image.is_stored %}

    <div style="float:left; width: {{thumbnail_size}}px; height: {{thumbnail_size}}px; padding:2px;">
        <a href="{% url image_detail object.image.id %}">
            <img src="{% if object.image.is_stored %}http://astrobin_images.{{s3_url}}/{{object.image.filename}}_thumb.png{% else %}/static/icons/iconic/orange/waiting_thumbnail.png{% endif %}"
                 class="capty-fixed thumbnail"
                 name="#capty-content-{{object.image.id}}-{{randomid}}"
                 alt="{{object.image.title|default:_("(no title)")}}"
                 width="{{thumbnail_size}}" height="{{thumbnail_size}}" />
        </a>
        <div class="capty-content" id="capty-content-{{object.image.id}}-{{randomid}}">
            M {{object.messier_number}}
            <br/>
            {% with object.image.user.username|truncatechars:24 as user %}
            {% url user_page user as user_page %}
            {% blocktrans %} by <a href="{{user_page}}">{{user}}</a>{% endblocktrans %}
            {% endwith %}
        </div>
    </div>
    {% endif %}
{% empty %}
<p>{% trans "No images" %}.</p>
{% endfor %}
</div>

{% if paginate %}
    {% include 'pagination.html' %}
{% endif %}
