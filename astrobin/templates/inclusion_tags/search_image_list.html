{% load i18n %}
{% load tags %}

<ul class="thumbnails astrobin-thumbnails">
{% for search_result in image_list %}
    {% if search_result.object.id %}
    <li class="thumbnail astrobin-thumbnail">
        <a href="{% url image_detail search_result.object.id %}">
            <img src="http://astrobin_images.{{s3_url}}/{{search_result.object.filename}}_thumb.png"
                 class="capty"
                 id="#capty-content-{{search_result.object.id}}"
                 alt="{{search_result.object.title|default:_("(no title)")}}"
                 width="{{thumbnail_size}}" height="{{thumbnail_size}}" />
        </a>
        <div class="capty-content" id="capty-content-{{search_result.object.id}}">
            {% ifequal sort '-integration' %}
                {% trans "Integration" %}: {{search_result.integration|seconds_to_hours}} {% trans "hours" %}
            {% endifequal %}

            {% ifequal sort '-rating' %}
                {% trans "Rating" %}: {{search_result.rating|cut_decimals:2}} x {{search_result.votes}}
            {% endifequal %}

            {% ifequal sort '-favorited' %}
                {% with search_result.favorited as favorited_count %}
                    {% if favorited_count > 0 %}
                        {% blocktrans count counter=favorited_count %}Favorited one time{% plural %}Favorited {{counter}} times{% endblocktrans %}
                    {% else %}
                        {% trans "Never favorited" %}
                    {% endif %}
                {% endwith %}
            {% endifequal %}

            {% ifequal sort '-uploaded' %}
                {{search_result.object.uploaded|ago}}
            {% endifequal %}

            {% ifequal sort '-acquired' %}
                {{search_result.last_acquisition_date}}
            {% endifequal %}

            {% ifequal sort '-views' %}
                {% with search_result.views as hit_count %}
                    {% blocktrans count counter=hit_count|add:"0" %}Viewed one time{% plural %}Viewed {{counter}} times{% endblocktrans %}
                {% endwith %}
            {% endifequal %}

            {% if not sort %}
                {{search_result.object.title|escape|truncatechars:23}}
            {% endif %}
            <br/>
            {% with search_result.object.user.username|truncatechars:24 as user %}
            {% url user_page user as user_page %}
            {% blocktrans %} by <a href="{{user_page}}">{{user}}</a>{% endblocktrans %}
            {% endwith %}
        </div>
     </li>
    {% endif %}
{% empty %}
    <li>{% trans "No images" %}.</li>
{% endfor %}
</ul>

{% if paginate %}
    {% include 'pagination.html' %}
{% endif %}
